# Symfony sandbox

## Presentation

Symfony experimentation area.

> This project was generated by https://github.com/jprivet-dev/symfony-sandbox.

## Prerequisites

Be sure to install the latest version of [Docker Engine](https://docs.docker.com/engine/install/).

## Installation

### The very first time
 
- `git clone git@github.com:jprivet-dev/symfony-sandbox.git`
- `cd symfony-sandbox`
- `make first`:
    - Build fresh images.
    - Start the containers.
    - Install dependencies.
    - Fix permissions.
    - Init Git hook pre-push.
    - Show info.
- Go on https://symfony-sandbox.localhost/.

All in one:

```shell
git clone git@github.com:jprivet-dev/symfony-sandbox.git \
&& cd symfony-sandbox \
&& make first
```

### The following times

start and stop the project (Docker):

```shell
make start
make stop
make restart
```

> Run `make` to see all shorcuts for the most common tasks.

## Makefile: variables overloading

You can customize the Docker build and up processes. To do this, create an `overload/.env` file and override the following variables :

```dotenv
# overload/.env

# See https://docs.docker.com/compose/how-tos/project-name/
PROJECT_NAME=my-project

# See https://github.com/dunglas/symfony-docker/blob/main/docs/options.md#docker-build-options
COMPOSE_UP_SERVER_NAME=my.localhost
COMPOSE_UP_ENV_VARS=SYMFONY_VERSION=6.4.* HTTP_PORT=8000 HTTPS_PORT=4443 HTTP3_PORT=4443

# See https://docs.docker.com/reference/cli/docker/compose/build/#options
COMPOSE_BUILD_OPTS=--no-cache
```

These variables will be taken into account by the `make` commands.

> As the variables are common to the `Makefile` and `docker compose`, I'm not attaching an environment file with the `--env-file` option at the moment. See https://docs.docker.com/compose/how-tos/environment-variables/.

## Troubleshooting

### Error "address already in use" or "port is already allocated"

See [Symfony starter project](https://github.com/jprivet-dev/symfony-starter?tab=readme-ov-file#error-address-already-in-use-or-port-is-already-allocated).

### Editing permissions on Linux

If you work on linux and cannot edit some of the project files right after the first installation, you can run in that project `make permissions`, to set yourself as owner of the project files that were created by the docker container.

> See https://github.com/dunglas/symfony-docker/blob/main/docs/troubleshooting.md

## Resources

- https://symfony.com/doc/current/setup/docker.html
- https://github.com/dunglas/symfony-docker
- https://github.com/dunglas/symfony-docker/blob/main/docs/troubleshooting.md
- https://github.com/dunglas/symfony-docker/blob/main/docs/options.md#docker-build-options
- https://github.com/jprivet-dev/symfony-docker

## Comments, suggestions?

Feel free to make comments/suggestions to me in the [Git issues section](https://github.com/jprivet-dev/symfony-sandbox/issues).

## License

This project is released under the [**MIT License**](https://github.com/jprivet-dev/symfony-sandbox/blob/main/LICENSE).